<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="[翻译] Redux vs MobX: Which Is Best for Your Project?"/>







  <link rel="alternate" href="/default" title="烹牛宰羊且为乐">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.4.x" />



<link rel="canonical" href="http://pannz.github.io/2017/07/02/[translation]-Redux-vs-MobX-Which-Is-Best-for-Your-Project/"/>


<meta name="description" content="这篇文章是我在众成翻译上认领的一篇翻译文章，前后断断续续翻译了大概一周时间，翻译的不好大家见谅。原文：Redux vs MobX: Which Is Best for Your Project?’译文：Redux vs MobX: 哪个更适合你的项目">
<meta property="og:type" content="article">
<meta property="og:title" content="[翻译] Redux vs MobX: Which Is Best for Your Project?">
<meta property="og:url" content="http://pannz.github.io/2017/07/02/[translation]-Redux-vs-MobX-Which-Is-Best-for-Your-Project/index.html">
<meta property="og:site_name" content="烹牛宰羊且为乐">
<meta property="og:description" content="这篇文章是我在众成翻译上认领的一篇翻译文章，前后断断续续翻译了大概一周时间，翻译的不好大家见谅。原文：Redux vs MobX: Which Is Best for Your Project?’译文：Redux vs MobX: 哪个更适合你的项目">
<meta property="og:image" content="http://p0.qhimg.com/t0180078822b48182f6.png">
<meta property="og:updated_time" content="2017-07-02T09:06:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[翻译] Redux vs MobX: Which Is Best for Your Project?">
<meta name="twitter:description" content="这篇文章是我在众成翻译上认领的一篇翻译文章，前后断断续续翻译了大概一周时间，翻译的不好大家见谅。原文：Redux vs MobX: Which Is Best for Your Project?’译文：Redux vs MobX: 哪个更适合你的项目">
<meta name="twitter:image" content="http://p0.qhimg.com/t0180078822b48182f6.png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.4.x" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />





<script>
  var CONFIG = {
    search: true,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  



    <title> [翻译] Redux vs MobX: Which Is Best for Your Project? · 烹牛宰羊且为乐 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">烹牛宰羊且为乐</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">烹牛宰羊且为乐</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
      
        <li class="menu-search">
          <form>
            <i class="iconfont icon-search" id="open-search"></i>
            <input type="text" class="search-input" id="search-input" />
            <i class="iconfont icon-close" id="close-search"></i>
          </form>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          [翻译] Redux vs MobX: Which Is Best for Your Project?
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017年7月2日
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#下面是译文："><span class="toc-text">下面是译文：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#关于作者"><span class="toc-text">关于作者</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redux-和-MobX-有哪些共同点"><span class="toc-text">Redux 和 MobX 有哪些共同点?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用-Mobx-的四个理由"><span class="toc-text">使用 Mobx 的四个理由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-易于学习和使用"><span class="toc-text">1. 易于学习和使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-写更少的代码"><span class="toc-text">2. 写更少的代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-完整支持面向对象编程"><span class="toc-text">3. 完整支持面向对象编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-易于处理嵌套数据"><span class="toc-text">4. 易于处理嵌套数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不使用-Mobx-的三个理由"><span class="toc-text">不使用 Mobx 的三个理由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-过于自由"><span class="toc-text">1. 过于自由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-难于调试"><span class="toc-text">2. 难于调试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-可能还有比-Mobx-更好的选择"><span class="toc-text">3. 可能还有比 Mobx 更好的选择</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码比较-Redux-vs-MobX"><span class="toc-text">代码比较: Redux vs MobX</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#初始引导"><span class="toc-text">初始引导</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#属性注入"><span class="toc-text">属性注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#定义-stores-actions-和-reducers"><span class="toc-text">定义 stores, actions, 和 reducers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他不同"><span class="toc-text">其他不同</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>这篇文章是我在<a href="www.zcfy.cc">众成翻译</a>上认领的一篇翻译文章，前后断断续续翻译了大概一周时间，翻译的不好大家见谅。<br>原文：<a href="https://www.sitepoint.com/redux-vs-mobx-which-is-best/" target="_blank" rel="external">Redux vs MobX: Which Is Best for Your Project?’</a><br>译文：<a href="http://www.zcfy.cc/article/3313" target="_blank" rel="external">Redux vs MobX: 哪个更适合你的项目</a></p>
<a id="more"></a>
<h2 id="下面是译文："><a href="#下面是译文：" class="headerlink" title="下面是译文："></a>下面是译文：</h2><p><img src="http://p0.qhimg.com/t0180078822b48182f6.png" alt="Pieces of data shaped like birds, migrating Redux to MobX"></p>
<p>对于很多 JavaScript 开发者，对 redux 最大的抱怨来主要在于当使用 redux 来实现需求的时候需要写大量的模板代码。一个更好的选择是 mobx，mobx 提供了类似的功能但是只需要写更少量的代码。</p>
<h3 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h3><ul>
<li><p><a href="https://www.sitepoint.com/beginners-guide-node-package-manager/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=&amp;utm_campaign=relatedauthor" target="_blank" rel="external"> Node 包管理器 npm 初学者指南</a></p>
</li>
<li><p><a href="https://www.sitepoint.com/10-jquery-html5-audio-players/?utm_source=sitepoint&amp;utm_medium=relatedinline&amp;utm_term=&amp;utm_campaign=relatedauthor" target="_blank" rel="external">10 个 jQuery 版本的 HTML5 音乐播放器</a></p>
</li>
</ul>
<p>对于 Mobx 新手，你可以快速浏览下这篇由 Mobx 的创造者写的<a href="https://medium.com/@mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254" target="_blank" rel="external">介绍</a>。你同样可以通过这个 <a href="https://www.sitepoint.com/manage-javascript-application-state-mobx/" target="_blank" rel="external">教程</a> 来获得一些实践经验。</p>
<p>本篇文章的目标是帮助 JavaScript 开发者来决定这两种状态管理方案哪一种最适合自己的项目。我已经迁移了这个 <a href="https://www.sitepoint.com/crud-app-react-redux-feathersjs/" target="_blank" rel="external">CRUD Redux 项目</a> 到 <a href="https://www.github.com/brandiqa/mobx-crud-example" target="_blank" rel="external">MobX</a> 版本来作为这篇文章的例子。我将会讨论下使用 Mobx 的优势与缺点，同时我会用实际的代码片段来展示这个两个版本的不同之处。</p>
<p>本文提到的项目的代码可以在 GitHub 上找到:</p>
<ul>
<li><p><a href="https://github.com/sitepoint-editors/redux-crud-example" target="_blank" rel="external">Redux CRUD example</a></p>
</li>
<li><p><a href="https://github.com/sitepoint-editors/mobx-crud-example" target="_blank" rel="external">MobX CRUD example</a></p>
</li>
</ul>
<h2 id="Redux-和-MobX-有哪些共同点"><a href="#Redux-和-MobX-有哪些共同点" class="headerlink" title="Redux 和 MobX 有哪些共同点?"></a>Redux 和 MobX 有哪些共同点?</h2><p>首先，我们先看看他们都有的共同点：</p>
<ul>
<li><p>都是开源的</p>
</li>
<li><p>提供客户端状态管理</p>
</li>
<li><p>支持时间旅行调试工具 <a href="https://github.com/zalmoxisus/redux-devtools-extension" target="_blank" rel="external">redux-devtools-extension</a></p>
</li>
<li><p>不依赖于某个特定框架</p>
</li>
<li><p>对 React/React Native 有着良好的支持</p>
</li>
</ul>
<h2 id="使用-Mobx-的四个理由"><a href="#使用-Mobx-的四个理由" class="headerlink" title="使用 Mobx 的四个理由"></a>使用 Mobx 的四个理由</h2><p>现在我们来看看 Redux 与 Mobx 间的主要不同点。</p>
<h3 id="1-易于学习和使用"><a href="#1-易于学习和使用" class="headerlink" title="1. 易于学习和使用"></a>1. 易于学习和使用</h3><p>对于一个初学者，学 30 分钟就能够学会怎么使用 Mobx。一旦你学习了 Mobx 的基本概念，仅此而已，那就够了。你不需要在学别的新东西。相比起来，Redux 的基本概念同样简单，然而，当你开始构建更加复杂的应用，你就不得不面对：</p>
<ul>
<li><p>使用 <a href="https://github.com/gaearon/redux-thunk" target="_blank" rel="external">redux-thunk</a> 处理异步 action</p>
</li>
<li><p>使用 <a href="https://github.com/redux-saga/redux-saga" target="_blank" rel="external">redux-saga</a> 简化代码</p>
</li>
<li><p>定义 selectors 来处理计算值等.</p>
</li>
</ul>
<p>使用 MobX, 所有的这些情况都被魔法般的考虑到。你不需要额外的库去处理这些情况。</p>
<h3 id="2-写更少的代码"><a href="#2-写更少的代码" class="headerlink" title="2. 写更少的代码"></a>2. 写更少的代码</h3><p>在 Redux 里要实现一个特性，你需要更改至少 4 个部件。这包括 reducers，actions，容器组件和组件的代码。如果你在一个小型项目上使用你会特别烦恼。Mobx 只要求你更改最少 2 个部件（比如：store 和 视图组件）。</p>
<h3 id="3-完整支持面向对象编程"><a href="#3-完整支持面向对象编程" class="headerlink" title="3. 完整支持面向对象编程"></a>3. 完整支持面向对象编程</h3><p>如果你更趋向于写面向对象的代码，你会很高兴的知道在 Mobx 里你可以使用 OOP 来实现应用逻辑的状态管理。通过对形如 <code>@observable</code> 和 <code>@observer</code> 的装饰器的使用，你可以很简单的使你的普通的 JavaScript 组件和 stores 变得响应式的。如果你更喜欢函数式编程，没问题，那也很好的被支持。而 Redux 则处于另一面，很大程度上是朝向着函数式编程的原则。但是，如果你想要一个基于 class 类的形式，你也可以使用 <a href="https://github.com/evturn/redux-connect-decorator" target="_blank" rel="external">redux-connect-decorator</a></p>
<h3 id="4-易于处理嵌套数据"><a href="#4-易于处理嵌套数据" class="headerlink" title="4. 易于处理嵌套数据"></a>4. 易于处理嵌套数据</h3><p>在大多数的 JavaScript 应用中，你会发现你与关联的数据或者嵌套的数据一起打交道。为了能够在 Redux store里使用，你不得不先对数据进行 <a href="http://redux.js.org/docs/recipes/reducers/NormalizingStateShape.html" target="_blank" rel="external">normalize</a> . 然后, 你不得不 <a href="http://redux.js.org/docs/recipes/reducers/UpdatingNormalizedData.html" target="_blank" rel="external">多写一些代码</a> 来管理被 normalize 后的数据中的关联的引用。<br>在 Mobx 中，在 store 里存储未 normalize 的数据是受 <a href="https://mobx.js.org/best/store.html" target="_blank" rel="external">推荐</a> 的。Mobx 可以保持数据的引用，这样你可以自动的重新渲染变化。通过使用领域对象来存储数据，你可以在另外的 store 里直接的引用不同的领域数据。此外你可以使用 <a href="https://mobx.js.org/refguide/computed-decorator.html" target="_blank" rel="external">(@)computed decorators</a> 和 <a href="https://mobx.js.org/refguide/modifiers.html" target="_blank" rel="external">observables 的修饰器</a> 来十分方便的解决复杂的数据挑战。</p>
<h2 id="不使用-Mobx-的三个理由"><a href="#不使用-Mobx-的三个理由" class="headerlink" title="不使用 Mobx 的三个理由"></a>不使用 Mobx 的三个理由</h2><h3 id="1-过于自由"><a href="#1-过于自由" class="headerlink" title="1. 过于自由"></a>1. 过于自由</h3><p>Redux 是一个对如何写状态代码提供了严格的指导方针的框架。这意味着你可以轻易的写测试和开发可维护的代码。Mobx 则是对怎么写代码没有任何的规则和限制。所以用 Mobx 的风险在于你很容易就走捷径和应用快速修复的代码，这些会导致不可维护的代码。</p>
<h3 id="2-难于调试"><a href="#2-难于调试" class="headerlink" title="2. 难于调试"></a>2. 难于调试</h3><p>Mbox 通过内部的“魔法”方法来处理大量的逻辑，使得你的应用是响应式的。当你在 store 和组件之间传递数据，这里有一些区域是你看不到的，当你的应用出现 bug 的时候你就很难调试。如果你没有使用 <code>@actions</code> 装饰器就在组件内直接改变 state， 你将很难精确的定位到一个错误的来源。</p>
<h3 id="3-可能还有比-Mobx-更好的选择"><a href="#3-可能还有比-Mobx-更好的选择" class="headerlink" title="3. 可能还有比 Mobx 更好的选择"></a>3. 可能还有比 Mobx 更好的选择</h3><p>在软件开发中，新趋势会一直发生。在短短的几年内，当前的软件技术可能会很快的失去力量。目前，还有几种解决方案与 Redux 和 Mobx 相竞争。一些例子： <a href="https://www.sitepoint.com/react-data-fetching-with-relay/" target="_blank" rel="external">Relay/Apollo &amp; GraphQL</a>, <a href="http://alt.js.org/" target="_blank" rel="external">Alt.js</a> 和 <a href="https://jumpsuit.js.org/" target="_blank" rel="external">Jumpsuit</a>. 所有的这些技术都有潜力变成最流行的方案，如果你真的想要知道那个方案最适合你，你不得不尝试所有这些方案。</p>
<h2 id="代码比较-Redux-vs-MobX"><a href="#代码比较-Redux-vs-MobX" class="headerlink" title="代码比较: Redux vs MobX"></a>代码比较: Redux vs MobX</h2><p>理论已经说的够多了，让我们来看看代码。首先，我们先比较每个版本的代码是怎么做初始引导的。</p>
<h3 id="初始引导"><a href="#初始引导" class="headerlink" title="初始引导"></a>初始引导</h3><p><strong>Redux 版本:</strong></p>
<p>在 Redux 里，我们首先要定义 store，然后通过 <code>Provider</code> 把 store 传入 <code>App</code> 内。同时，我们需要定义 <code>redux-thunk</code> he  <code>redux-promise-middleware</code> 来处理异步函数。<code>redux-devtools-extension</code> 允许我们能够进行时间旅行模式来调试 store。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">// src/store.js</div><div class="line">import &#123; applyMiddleware, createStore &#125; from &quot;redux&quot;;</div><div class="line">import thunk from &quot;redux-thunk&quot;;</div><div class="line">import promise from &quot;redux-promise-middleware&quot;;</div><div class="line">import &#123; composeWithDevTools &#125; from &apos;redux-devtools-extension&apos;;</div><div class="line">import rootReducer from &quot;./reducers&quot;;</div><div class="line"></div><div class="line">const middleware = composeWithDevTools(applyMiddleware(promise(), thunk));</div><div class="line"></div><div class="line">export default createStore(rootReducer, middleware);</div><div class="line"></div><div class="line">-------------------------------------------------------------------------------</div><div class="line"></div><div class="line">// src/index.js</div><div class="line">....</div><div class="line">ReactDOM.render(</div><div class="line">  &lt;BrowserRouter&gt;</div><div class="line">    &lt;Provider store=&#123;store&#125;&gt;</div><div class="line">      &lt;App /&gt;</div><div class="line">    &lt;/Provider&gt;</div><div class="line">  &lt;/BrowserRouter&gt;,</div><div class="line">  document.getElementById(&apos;root&apos;)</div><div class="line">);</div></pre></td></tr></table></figure>
<p><strong>MobX 版本:</strong></p>
<p>在 Mobx 里，，我们需要建立多个 store。在这种情况下，我只使用一个 store，这个 store 被我放在一个名叫 <code>allStores</code> 的集合。然后由 <code>Provider</code> 来传递这些 stores 给 <code>App</code>.<br>正如之前提到的，Mobx 不需要外部库来处理异步操作，所以只要很少的代码。但是，我们需要 <code>mobx-remotedev</code> 来连接到 <code>redux-devtools-extension</code> 调试工具。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">// src/stores/index.js</div><div class="line">import remotedev from &apos;mobx-remotedev&apos;;</div><div class="line">import Store from &apos;./store&apos;;</div><div class="line"></div><div class="line">const contactConfig = &#123;</div><div class="line">  name:&apos;Contact Store&apos;,</div><div class="line">  global: true,</div><div class="line">  onlyActions:true,</div><div class="line">  filters: &#123;</div><div class="line">    whitelist: /fetch|update|create|Event|entity|entities|handleErrors/</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const contactStore = new Store(&apos;api/contacts&apos;);</div><div class="line"></div><div class="line">const allStores = &#123;</div><div class="line">  contactStore: remotedev(contactStore, contactConfig)</div><div class="line">&#125;;</div><div class="line"></div><div class="line">export default allStores;</div><div class="line"></div><div class="line">-------------------------------------------------------------------------------</div><div class="line"></div><div class="line">// src/index.js</div><div class="line">...</div><div class="line">ReactDOM.render(</div><div class="line">  &lt;BrowserRouter&gt;</div><div class="line">    &lt;Provider stores=&#123;allStores&#125;&gt;</div><div class="line">      &lt;App /&gt;</div><div class="line">    &lt;/Provider&gt;</div><div class="line">  &lt;/BrowserRouter&gt;,</div><div class="line">  document.getElementById(&apos;root&apos;)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>在这里二者的代码量大致相等，Mobx 比 Redux 少一些 import 语句。</p>
<h3 id="属性注入"><a href="#属性注入" class="headerlink" title="属性注入"></a>属性注入</h3><p><strong>Redux 版本:</strong></p>
<p>在 Redux 中，state 和 actions 通过 react-redux 的 <code>connect()</code> 函数传给 props<br>In Redux, state and actions are passed to props using react-redux’s <code>connect()</code> function.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// src/pages/contact-form-page.js</div><div class="line">...</div><div class="line">  // accessing props</div><div class="line">  &lt;ContactForm</div><div class="line">    contact=&#123;this.props.contact&#125;</div><div class="line">    loading=&#123;this.props.loading&#125;</div><div class="line">    onSubmit=&#123;this.submit&#125;</div><div class="line">  /&gt;</div><div class="line">...</div><div class="line"></div><div class="line">// function for injecting state into props</div><div class="line">function mapStateToProps(state) &#123;</div><div class="line">  return &#123;</div><div class="line">    contact: state.contactStore.contact,</div><div class="line">    errors: state.contactStore.errors</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// injecting both state and actions into props</div><div class="line">export default connect(mapStateToProps, &#123; newContact,</div><div class="line">  saveContact,</div><div class="line">  fetchContact,</div><div class="line">  updateContact</div><div class="line">&#125;)(ContactFormPage);</div></pre></td></tr></table></figure>
<p><strong>MobX 版本:</strong></p>
<p>在 Mobx，我们只需要注入 <code>stores</code> 集合。我们在容器或则组件类的上面使用 <code>@inject</code> 来做属性注入。这让 <code>stores</code> 可以在 <code>props</code> 上可以访问到。同时，反过来，我们可以访问一个特定的 store 并且将它传给子组件。state 和 actions 可以通过 在 props 上的 <code>store</code> 访问到，所以不需要像 Redux 要单独去传入到组件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// src/pages/contact-form-page.js</div><div class="line"></div><div class="line">...</div><div class="line">@inject(&quot;stores&quot;) @observer // injecting store into props</div><div class="line">class ContactFormPage extends Component &#123;</div><div class="line">...</div><div class="line">  // accessing store via props</div><div class="line">  const &#123; contactStore:store &#125; = this.props.stores;</div><div class="line">  return (</div><div class="line">      &lt;ContactForm</div><div class="line">        store=&#123;store&#125;</div><div class="line">        form=&#123;this.form&#125;</div><div class="line">        contact=&#123;store.entity&#125;</div><div class="line">      /&gt;</div><div class="line">  )</div><div class="line">...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>MobX 版本看起来比 Redux 版本更加容易阅读，然而，我们可以使用<a href="https://github.com/evturn/redux-connect-decorator" target="_blank" rel="external">redux-connect-decorators</a> 来简化 Redux 代码。 在这个情况下并没有明显的胜者。</p>
<h3 id="定义-stores-actions-和-reducers"><a href="#定义-stores-actions-和-reducers" class="headerlink" title="定义 stores, actions, 和 reducers"></a>定义 stores, actions, 和 reducers</h3><p>为了使文章精简，我会只展示一个操作的示例代码。</p>
<p><strong>Redux 版本:</strong></p>
<p>在 Redux 里, 我们需要定义 actions 和 reducers.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">// src/actions/contact-actions.js</div><div class="line">...</div><div class="line">export function fetchContacts()&#123;</div><div class="line">  return dispatch =&gt; &#123;</div><div class="line">    dispatch(&#123;</div><div class="line">      type: &apos;FETCH_CONTACTS&apos;,</div><div class="line">      payload: client.get(url)</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">...</div><div class="line"></div><div class="line">// src/reducers/contact-reducer</div><div class="line">...</div><div class="line">switch (action.type) &#123;</div><div class="line">    case &apos;FETCH_CONTACTS_FULFILLED&apos;: &#123;</div><div class="line">      return &#123;</div><div class="line">        ...state,</div><div class="line">        contacts: action.payload.data.data || action.payload.data,</div><div class="line">        loading: false,</div><div class="line">        errors: &#123;&#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    case &apos;FETCH_CONTACTS_PENDING&apos;: &#123;</div><div class="line">      return &#123;</div><div class="line">        ...state,</div><div class="line">        loading: true,</div><div class="line">        errors: &#123;&#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    case &apos;FETCH_CONTACTS_REJECTED&apos;: &#123;</div><div class="line">      return &#123;</div><div class="line">        ...state,</div><div class="line">        loading: false,</div><div class="line">        errors: &#123; global: action.payload.message &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<p><strong>MobX 版本:</strong></p>
<p>在 MobX 里, action 和 reducer 的逻辑在一个类里被实现. 我们定义一个异步操作，当 <code>response</code> 收到后，调用另外一个 <code>实体已获取</code> 的 action。<br>因为 Mobx 使用的是 OPP 风格，<code>Store</code> 类在这里被定义允许方便地创建多个 store 使用类的构造函数。因此这里展示的是不依赖于其他存储域的基本代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// src/stores/store.js</div><div class="line">...</div><div class="line">@action</div><div class="line">fetchAll = async() =&gt; &#123;</div><div class="line">  this.loading = true;</div><div class="line">  this.errors = &#123;&#125;;</div><div class="line">  try &#123;</div><div class="line">    const response = await this.service.find(&#123;&#125;)</div><div class="line">    runInAction(&apos;entities fetched&apos;, () =&gt; &#123;</div><div class="line">      this.entities = response.data;</div><div class="line">      this.loading = false;</div><div class="line">    &#125;);</div><div class="line">  &#125; catch(err) &#123;</div><div class="line">      this.handleErrors(err);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<p>信或者不信，这两个版本的代码逻辑可以同样的任务。分别是</p>
<ul>
<li><p>更新 UI 加载状态</p>
</li>
<li><p>获取异步数据</p>
</li>
<li><p>捕获异常和更新状态</p>
</li>
</ul>
<p>在 Redux 里,我们用 <strong>33 行代码</strong>。 在 MobX 里, 我们大约用 <strong>14 行代码</strong> 来达到相同的效果! 用 Mobx 的一个主要的好处是你几乎可以在所有的 store 类内稍加改动或者都不用修改就能重用这些基本的代码。这意味着你可以更快的构建的你的应用。</p>
<h3 id="其他不同"><a href="#其他不同" class="headerlink" title="其他不同"></a>其他不同</h3><p>在 Redux 里创建表单，我们有 <a href="https://www.npmjs.com/package/redux-form" target="_blank" rel="external">redux-form</a>. 在 MobX 里, 我们有 <a href="https://www.npmjs.com/package/mobx-react-form" target="_blank" rel="external">mobx-react-form</a>. 二者都很成熟可以帮组你更加简单的处理逻. 个人来说，我更喜欢 <code>mobx-react-form</code> 因为它允许你通过插件来验证输入。 而 <code>redux-form</code>, 你要么自己编写验证代码或者你可以引入一个验证库来处理验证。</p>
<p>Mobx 一个微小的缺点是，在观察模式下你不能直接访问一个确定的函数，因为他们已经不是真正的 JavaScript 对象，幸运的是，我们提供了 <code>toJS()</code> 函数，你可以使用它来把观察对象转换成 JavaScript 对象。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>很明显，你可以看到使用 Mobx 的代码十分精简的。使用 OOP 风格和良好的开发实践，你可以快熟的构建应用。主要的缺点在于它很容易编写出质量低，难以维护的代码。</p>
<p>另一方面，Redux, 更受欢迎， <a href="https://www.sitepoint.com/premium/courses/redux-design-issues-and-testing-2962" target="_blank" rel="external">非常适合构建大型复杂的项目</a>。它是个严格的框架，带有保障措施保障每个开发者写出的代码易于测试和维护。然而，它并不适合一个小的项目。</p>
<p>尽管 Mobx 的缺点, 如果你遵守良好的开发实践，你任然可以用它来构建大型应用。用爱因斯坦的话来说, “让一切尽可能的简单，而不是仅仅是简单”。</p>
<p>我希望我已经提供了足够的信息让你可以明确的知道是否应该迁移到 Mobx 或者继续使用 Redux。最终的决定取决于你工作的项目的类型和你能够得到的资源。</p>
<p>如果你需要任何对 Mobx 示例代码的澄清，随时在下面的评论里提问，不知道我有没有给你再下一个 React 项目中尝试 Mobx 的信心。</p>
<p><em>这篇文章由同行 <a href="https://github.com/annoyingmouse" target="_blank" rel="external">Dominic Myers</a> 和 <a href="https://www.sitepoint.com/author/vildansoftic/" target="_blank" rel="external">Vildan Softic</a> 二人做评审。感谢所有在 SitePoint 上评审的同行，使 SitePoint 能做出最好的内容。</em></p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>作者: </span>
      <span>zhifan</span>
    </p>
    <p class="copyright-item">
      <span>来源: </span>
      <a href="http://pannz.github.io">http://pannz.github.io</a>
    </p>
    <p class="copyright-item">
      <span>链接: </span>
      <a href="http://pannz.github.io/2017/07/02/[translation]-Redux-vs-MobX-Which-Is-Best-for-Your-Project/">http://pannz.github.io/2017/07/02/[translation]-Redux-vs-MobX-Which-Is-Best-for-Your-Project/</a>
    </p>

    <p class="copyright-item lincese">
      
      本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
    </p>
  </div>



      
      
  <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden />
    <label class="reward-button" for="reward">赞赏支持</label>
    <div class="qr-code">
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/image/reward/wechat.png" title="wechat">
        </label>
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/image/reward/alipay.png" title="alipay">
        </label>
      
    </div>
  </div>

    

    
      <footer class="post-footer">
        
        
        
  <nav class="post-nav">
    
    
      <a class="next" href="/2017/06/10/flex-layout-note/">
        <span class="next-text nav-default">flex layout 小记</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:wojiaopanzhfian@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/pannz/" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a href="http://weibo.com/panzhifan" class="iconfont icon-weibo" title="weibo"></a>
        
      
    
      
        
          <a href="https://www.zhihu.com/people/pan-zhi-fan/activities" class="iconfont icon-zhihu" title="zhihu"></a>
        
      
    
      
    
    
    
      
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
    
    2017

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">zhifan</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  




    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.4.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.4.x"></script>

    
  <script type="text/html" id="search-result">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">
          <a href="$url$" class="post-link">
            $title$
          </a>
        </h1>
      </header>
      <div class="post-content">
        $content$
        <div class="read-more">
          <a href="$url$" class="read-more-link">
            Read more..
          </a>
        </div>
      </div>
    </article>
  </script>
  <script type="text/html" id="no-search-result">
    <div class="no-result">
      <h2>No result found!</h2>
    </div>
  </script>
  <script type="text/javascript" src="/js/src/search.js?v=2.4.x"></script>

  </body>
</html>
